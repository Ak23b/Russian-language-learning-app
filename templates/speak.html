<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Speak</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h2>English → Russian Text-to-Speech</h2>

        <!-- Input form always visible -->
        <form method="POST" action="{{ url_for('speak') }}">
            <label for="text"><strong>Enter English text:</strong></label><br>
            <textarea id="text" name="text" placeholder="Type English here..." required>{{ original_text or "" }}</textarea>
            <button type="submit">Translate & Generate Speech</button>
        </form>

        <!-- Results appear after processing -->
        {% if audio_file %}
            <div class="results">
                <p><strong>English Input:</strong> {{ original_text }}</p>
                <p><strong>Translated Russian:</strong> {{ translated_text }}</p>

                <p><strong>Generated Audio:</strong></p>
                <audio controls>
                    <source src="{{ audio_file }}" type="audio/wav">
                    Your browser does not support the audio element.
                </audio>

                <!-- Manual Save Option -->
                <form method="POST" action="{{ url_for('save_audio') }}">
                    <!-- Hidden fields to pass all needed info -->
                    <input type="hidden" name="filename" value="{{ audio_filename }}">
                    <input type="hidden" name="original_text" value="{{ original_text }}">
                    <input type="hidden" name="translated_text" value="{{ translated_text }}">
                    <button type="submit" class="btn">💾 Save this Audio</button>
                </form>
            </div>
        {% endif %}

        <div class="nav-links">
            <a href="{{ url_for('dashboard') }}">🏠 Dashboard</a>
            <a href="{{ url_for('library') }}">🎵 Audio Library</a>
        </div>
    </div>
</body>
</html>
